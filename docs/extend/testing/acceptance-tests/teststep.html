<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Extending Terraform is a section for content dedicated to developing Plugins to extend Terraform&#x27;s core offering.">

    <link rel="apple-touch-icon" sizes="180x180" href="https://ewilde.github.io/terraform-provider-openfaas/assets/images/favicons/apple-touch-icon-13180a24.png">
    <link rel="icon" type="image/png" href="https://ewilde.github.io/terraform-provider-openfaas/assets/images/favicons/favicon-32x32-62171ffd.png" sizes="32x32">
    <link rel="icon" type="image/png" href="https://ewilde.github.io/terraform-provider-openfaas/assets/images/favicons/favicon-16x16-2821bcc8.png" sizes="16x16">
    <link rel="manifest" href="/android-manifest.json">
    <link rel="mask-icon" href="https://ewilde.github.io/terraform-provider-openfaas/assets/images/favicons/safari-pinned-tab-bab846e1.svg" color="#5C4EE5">
    <meta name="msapplication-config" content="/microsoft-tile.xml" />
    <meta name="theme-color" content="#ffffff">

    <meta name="twitter:card" content="summary" />
    <meta name="twitter:site" content="@HashiCorp" />
    <meta name="twitter:creator" content="@HashiCorp" />
    <meta property="og:type" content="website" />
    <meta property="og:url" content="https://ewilde.github.io/terraform-provider-openfaas/docs/extend/testing/acceptance-tests/teststep.html" />
    <meta property="og:title" content="Extending Terraform - Acceptance Testing: TestStep - Terraform by HashiCorp" />
    <meta property="og:site_name" content="Terraform by HashiCorp"/>
    <meta property="og:image" content="https://ewilde.github.io/terraform-provider-openfaas/https://ewilde.github.io/terraform-provider-openfaas/assets/images/og-image-f5bbc98c.png"/>
    <meta property="og:image:width" content="100"/>
    <meta property="og:image:height" content="100"/>
    <meta property="og:description" content="Extending Terraform is a section for content dedicated to developing Plugins to extend Terraform&#x27;s core offering." />

    <title>Extending Terraform - Acceptance Testing: TestStep - Terraform by HashiCorp</title>

    <!-- Stylesheets -->
    <link rel="stylesheet" href="https://use.typekit.net/wxf7mfi.css">
    <link href="https://ewilde.github.io/terraform-provider-openfaas/assets/stylesheets/application-845f4575.css" rel="stylesheet" />

    <!-- Site scripts -->
    <!--[if lt IE 9]><script src="https://ewilde.github.io/terraform-provider-openfaas/assets/javascripts/ie-compat-c141a02d.js" defer="defer"></script><![endif]-->
    <script src="https://ewilde.github.io/terraform-provider-openfaas/assets/javascripts/application-e080fe63.js" defer="defer"></script>

    <!-- Analytics scrpts -->
    <script defer>
      !function(){var e=window.analytics=window.analytics||[];if(!e.initialize)if(e.invoked)window.console&&console.error&&console.error("Segment snippet included twice.");else{e.invoked=!0,e.methods=["trackSubmit","trackClick","trackLink","trackForm","pageview","identify","reset","group","track","ready","alias","debug","page","once","off","on"],e.factory=function(t){return function(){var a=Array.prototype.slice.call(arguments);return a.unshift(t),e.push(a),e}};for(var t=0;t<e.methods.length;t++){var a=e.methods[t];e[a]=e.factory(a)}e.load=function(e){var t=document.createElement("script");t.type="text/javascript",t.async=!0,t.src=("https:"===document.location.protocol?"https://":"http://")+"cdn.segment.com/analytics.js/v1/"+e+"/analytics.min.js";var a=document.getElementsByTagName("script")[0];a.parentNode.insertBefore(t,a)},e.SNIPPET_VERSION="4.0.0",e.load("0EXTgkNx0Ydje2PGXVbRhpKKoe5wtzcE")}}();var om597a24292a958,om597a24292a958_poll=function(){var e=0;return function(t,a){clearInterval(e),e=setInterval(t,a)}}();!function(e,t,a){if(e.getElementById(a))om597a24292a958_poll(function(){if(window.om_loaded&&!om597a24292a958)return(om597a24292a958=new OptinMonsterApp).init({s:"35109.597a24292a958",staging:0,dev:0,beta:0})},25);else{var n=!1,o=e.createElement("script");o.id=a,o.src="//a.optnmstr.com/app/js/api.min.js",o.async=!0,o.onload=o.onreadystatechange=function(){if(!(n||this.readyState&&"loaded"!==this.readyState&&"complete"!==this.readyState))try{n=om_loaded=!0,(om597a24292a958=new OptinMonsterApp).init({s:"35109.597a24292a958",staging:0,dev:0,beta:0}),o.onload=o.onreadystatechange=null}catch(e){}},(document.getElementsByTagName("head")[0]||document.documentElement).appendChild(o)}}(document,0,"omapi-script");
    </script>

    
  </head>

  <body id="page-docs-extend-testing-acceptance-teststep" class="layout-extend-testing page-extending-terraform-acceptance-testing-teststep">

    <svg class="hidden-print" aria-hidden="true" style="position: absolute; width: 0; height: 0;" width="0" height="0" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
  <defs>
    <symbol id="mega-nav-icon-angle" viewBox="0 0 13 7">
      <polygon points="6.5,6.5 0.7,1.6 1.3,0.8 6.5,5.2 11.7,0.8 12.3,1.6 "/>
    </symbol>
    <symbol id="mega-nav-icon-close" viewBox="0 0 13 15">
      <path vector-effect="non-scaling-stroke" d="M1.1 14L11.9 1M11.9 14L1.1 1"/>
    </symbol>
  </defs>
</svg>
<div class="hidden-print mega-nav-sandbox">
  <div class="mega-nav-banner">
    <div class="container">
      <div class="mega-nav-banner-item">
        <a class="mega-nav-banner-logo" href="https://www.hashicorp.com"><img src="https://ewilde.github.io/terraform-provider-openfaas/assets/images/mega-nav/logo-hashicorp-wordmark-bbed0e8a.svg" alt="HashiCorp Logo" /></a>
      </div>
      <div class="mega-nav-banner-item">
        <p class="mega-nav-tagline"><span class="visible-xs text-muted">Learn the</span><span class="hidden-xs text-muted">Learn how Terraform fits into the</span></p>
        <div id="#mega-nav" class="mega-nav">
          <button type="button" id="mega-nav-ctrl" class="mega-nav-ctrl">
            <div class="mega-nav-ctrl-items">
              <img src="https://ewilde.github.io/terraform-provider-openfaas/assets/images/mega-nav/logo-hashicorp-a66fda95.svg" alt="HashiCorp Logo" />
              <strong>HashiCorp Suite</strong>
              <span class="mega-nav-icon-outline">
                <svg class="mega-nav-icon mega-nav-icon-angle-right" aria-hidden="true"><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#mega-nav-icon-angle"></use></svg><span class="visuallyhidden">Open</span>
              </span>
            </div>
          </button>
          <div id="mega-nav-body-ct" class="mega-nav-body-ct" aria-labelledby="mega-nav-ctrl">
            <div class="mega-nav-body">
              <button type="button" id="mega-nav-close" class="mega-nav-close"><svg class="mega-nav-icon mega-nav-icon-close" aria-hidden="true"><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#mega-nav-icon-close"></use></svg><span class="visuallyhidden">Close</span></button>
              <div class="mega-nav-body-header">
                <div class="mega-nav-body-header-item">
                  <h2 class="mega-nav-h1">Provision, Secure, Connect, and&nbsp;Run</h2>
                  <p class="mega-nav-h2">Any infrastructure for any&nbsp;application</p>
                </div>
                <div class="mega-nav-body-header-item">
                  <a href="https://www.hashicorp.com/" class="mega-nav-btn"><img src="https://ewilde.github.io/terraform-provider-openfaas/assets/images/mega-nav/logo-hashicorp-a66fda95.svg" alt="HashiCorp Logo" /> Learn the HashiCorp Enterprise&nbsp;Suite <svg class="mega-nav-icon mega-nav-icon-angle-right" aria-hidden="true"><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#mega-nav-icon-angle"></use></svg></a>
                </div>
              </div>
              <div class="mega-nav-body-grid">
                <div class="mega-nav-body-grid-item">
                  <h3 class="mega-nav-h3">Provision</h3>
                  <ul class="mega-nav-grid">
                    <li>
                      <a href="https://www.vagrantup.com" class="mega-nav-grid-item mega-nav-grid-item-vagrant">
                        <div class="mega-nav-grid-item-img">
                          <img src="https://ewilde.github.io/terraform-provider-openfaas/assets/images/mega-nav/logo-vagrant-a7ab5898.svg" alt="Vagrant Logo" />
                        </div>
                        <b>Vagrant</b>
                        <ul>
                          <li><span class="mega-nav-tag">Build</span></li>
                          <li><span class="mega-nav-tag">Test</span></li>
                        </ul>
                      </a>
                    </li>
                    <li>
                      <a href="https://www.packer.io" class="mega-nav-grid-item mega-nav-grid-item-packer">
                        <div class="mega-nav-grid-item-img">
                          <img src="https://ewilde.github.io/terraform-provider-openfaas/assets/images/mega-nav/logo-packer-cb3b9b94.svg" alt="Packer Logo" />
                        </div>
                        <b>Packer</b>
                        <ul>
                          <li><span class="mega-nav-tag">Package</span></li>
                        </ul>
                      </a>
                    </li>
                    <li>
                      <a href="https://www.terraform.io" class="mega-nav-grid-item mega-nav-grid-item-terraform">
                        <div class="mega-nav-grid-item-img">
                          <img src="https://ewilde.github.io/terraform-provider-openfaas/assets/images/mega-nav/logo-terraform-ff69eaae.svg" alt="Terraform Logo" />
                        </div>
                        <b>Terraform</b>
                        <ul>
                          <li><span class="mega-nav-tag">Provision</span></li>
                        </ul>
                      </a>
                    </li>
                  </ul>
                </div>
                <div class="mega-nav-body-grid-item">
                  <h3 class="mega-nav-h3">Secure</h3>
                  <ul class="mega-nav-grid">
                    <li>
                      <a href="https://www.vaultproject.io" class="mega-nav-grid-item mega-nav-grid-item-vault">
                        <div class="mega-nav-grid-item-img">
                          <img src="https://ewilde.github.io/terraform-provider-openfaas/assets/images/mega-nav/logo-vault-0f83e3d2.svg" alt="Vault Logo" />
                        </div>
                        <b>Vault</b>
                        <ul>
                          <li><span class="mega-nav-tag">Secure</span></li>
                        </ul>
                      </a>
                    </li>
                  </ul>
                </div>
                <div class="mega-nav-body-grid-item">
                  <h3 class="mega-nav-h3">Connect</h3>
                  <ul class="mega-nav-grid">
                    <li>
                      <a href="https://www.consul.io" class="mega-nav-grid-item mega-nav-grid-item-consul">
                        <div class="mega-nav-grid-item-img">
                          <img src="https://ewilde.github.io/terraform-provider-openfaas/assets/images/mega-nav/logo-consul-c77f6844.svg" alt="Consul Logo" />
                        </div>
                        <b>Consul</b>
                        <ul>
                          <li><span class="mega-nav-tag">Connect</span></li>
                        </ul>
                      </a>
                    </li>
                  </ul>
                </div>
                <div class="mega-nav-body-grid-item">
                  <h3 class="mega-nav-h3">Run</h3>
                  <ul class="mega-nav-grid">
                    <li>
                      <a href="https://www.nomadproject.io" class="mega-nav-grid-item mega-nav-grid-item-nomad">
                        <div class="mega-nav-grid-item-img">
                          <img src="https://ewilde.github.io/terraform-provider-openfaas/assets/images/mega-nav/logo-nomad-c4c148be.svg" alt="Nomad Logo" />
                        </div>
                        <b>Nomad</b>
                        <ul>
                          <li><span class="mega-nav-tag">Run</span></li>
                        </ul>
                      </a>
                    </li>
                  </ul>
                </div>
              </div>
              <div class="mega-nav-body-footer">
                <p>Seven elements of the modern Application Lifecycle</p>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>


    <div id="header" class="navigation navbar-static-top hidden-print">
      <div class="container">
        <div class="row">
          <div class="col-xs-12">
            <div class="navbar-header">
              <div class="navbar-brand">
                <a href="/">
                  <svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 251 61" class="logo" height="50">
  <path class="text" fill="#000" fill-rule="nonzero" d="M81.78 19.54h-8.89v-5.31H96.7v5.31h-8.9v26.53h-6"></path>
  <path class="text" fill="#000" fill-rule="nonzero" d="M102.19 41.77c2.415-.012 4.814-.383 7.12-1.1l.91 4.4c-2.745.99-5.642 1.49-8.56 1.48-7.31 0-9.85-3.39-9.85-9V31.4c0-4.92 2.2-9.08 9.66-9.08s9.13 4.35 9.13 9.37v5h-13v1.2c.05 2.78 1.05 3.88 4.59 3.88zM97.65 32h7.41v-1.18c0-2.2-.67-3.73-3.54-3.73s-3.87 1.53-3.87 3.73V32zm28.54-4.33c-2.148.97-4.217 2.102-6.19 3.39v15h-5.83V22.79h4.92l.38 2.58c1.897-1.284 3.955-2.313 6.12-3.06l.6 5.36zm14.24 0c-2.14.97-4.204 2.103-6.17 3.39v15h-5.83V22.79h4.92l.38 2.58c1.897-1.284 3.955-2.313 6.12-3.06l.58 5.36zm19.51 18.4h-4.78l-.43-1.58c-2.062 1.342-4.47 2.058-6.93 2.06-4.25 0-6.07-2.92-6.07-6.93 0-4.73 2.06-6.55 6.79-6.55h5.59v-2.44c0-2.58-.72-3.49-4.45-3.49-2.17.024-4.33.266-6.45.72l-.72-4.45c2.606-.72 5.296-1.09 8-1.1 7.31 0 9.47 2.58 9.47 8.41l-.02 15.35zm-5.83-8.8h-4.3c-1.91 0-2.44.53-2.44 2.29s.53 2.34 2.34 2.34c1.544-.024 3.058-.436 4.4-1.2v-3.43zm23.75-19.79c-1.1-.237-2.224-.364-3.35-.38-2.29 0-2.63 1-2.63 2.77v2.92h5.93l-.33 4.64h-5.59v18.64h-5.83V27.43h-3.73v-4.64h3.73v-3.25c0-4.83 2.25-7.22 7.41-7.22 1.69-.006 3.372.22 5 .67l-.61 4.49zm11.38 29.07c-8 0-10.13-4.4-10.13-9.18v-5.88c0-4.78 2.15-9.18 10.13-9.18s10.13 4.4 10.13 9.18v5.88c.01 4.78-2.15 9.18-10.13 9.18zm0-19.27c-3.11 0-4.3 1.39-4.3 4v6.26c0 2.63 1.2 4 4.3 4 3.1 0 4.3-1.39 4.3-4V31.3c0-2.63-1.19-4.02-4.3-4.02zm25.14.39c-2.14.97-4.204 2.103-6.17 3.39v15h-5.83V22.79h4.92l.38 2.58c1.897-1.284 3.954-2.313 6.12-3.06l.58 5.36zm16.02 18.4V29.82c0-1.24-.53-1.86-1.86-1.86-2.137.254-4.2.934-6.07 2v16.11h-5.83V22.79h4.45l.57 2c2.906-1.47 6.088-2.315 9.34-2.48 1.843-.174 3.6.82 4.4 2.49 2.91-1.49 6.104-2.34 9.37-2.49 3.87 0 5.26 2.72 5.26 6.88v16.88h-5.83V29.82c0-1.24-.53-1.86-1.86-1.86-2.14.236-4.208.917-6.07 2v16.11h-5.87z"></path>
  <path class="rect-dark" fill="#4040B2" d="M36.4 39.13l16.4-9.46V10.72L36.4 20.2"></path>
  <path class="rect-light" fill="#5C4EE5" d="M18.2 10.72l16.4 9.48v18.93l-16.4-9.47"></path>
  <path class="rect-light" fill="#5C4EE5" d="M0 19.09l16.4 9.47V9.62L0 .15m18.2 50.53l16.4 9.47V41.21l-16.4-9.47"></path>
</svg>

                </a>
              </div>
              <button class="navbar-toggle" type="button">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
              </button>
            </div>
            <div class="buttons hidden-xs">
              <nav class="navigation-links" role="navigation">
                <ul class="main-links nav navbar-nav navbar-right">
                  <li><a href="/intro/index.html">Intro</a></li>
                  <li><a href="/docs/index.html">Docs</a></li>
                  <li><a href="/guides/index.html">Guides</a></li>
                  <li><a href="/docs/extend/index.html">Extend</a></li>
                  <li><a href="https://www.hashicorp.com/products/terraform/?utm_source=oss&utm_medium=header-nav&utm_campaign=terraform">Enterprise</a></li>
                  <li>
                    <a href="/downloads.html">
                      <svg xmlns="http://www.w3.org/2000/svg" version="1.1" viewbox="0 0 28 28" enable-background="new 0 0 28 28" xmlns:xlink="http://www.w3.org/1999/xlink" xml:space="preserve">
  <path d="M28 0H0v28h28V0zM13.8 22.9L7 17.3l2-2.4 3.2 2.6V7h3.2v10.5l3.2-2.6 2 2.4L13.8 22.9z"></path>
</svg>
 Download
                    </a>
                  </li>
                  <li>
                    <a href="https://github.com/hashicorp/terraform">
                      <svg xmlns="http://www.w3.org/2000/svg" version="1.1" viewbox="0 0 28 28" enable-background="new 0 0 28 28" xmlns:xlink="http://www.w3.org/1999/xlink" xml:space="preserve">
  <path d="M28 0H0v28h11.4c0 0 0-1.3 0-2.4C7.7 26.4 7 23.9 7 23.9 6.4 22.4 5.5 22 5.5 22c-1.2-0.8 0.1-0.8 0.1-0.8 1.3 0.1 2 1.4 2 1.4 1.2 2 3 1.4 3.8 1.1 0.1-0.8 0.5-1.4 0.9-1.8 -2.9-0.3-6-1.5-6-6.5 0-1.4 0.5-2.6 1.3-3.5C7.5 11.5 7 10.2 7.8 8.4c0 0 1.1-0.4 3.6 1.3 1-0.3 2.2-0.4 3.3-0.4 1.1 0 2.2 0.2 3.3 0.4 2.5-1.7 3.6-1.3 3.6-1.3 0.7 1.8 0.3 3.1 0.1 3.5 0.8 0.9 1.3 2.1 1.3 3.5 0 5-3.1 6.1-6 6.5 0.5 0.4 0.9 1.2 0.9 2.4 0 1.8 0 3.7 0 3.7H28V0z"></path>
</svg>
 GitHub
                    </a>
                  </li>
                </ul>
              </nav>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="sidebar-overlay"></div>

<aside class="sidebar" role="navigation">
  <div class="sidebar-header">
    <svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 251 61" class="logo" height="42">
  <path class="text" fill="#000" fill-rule="nonzero" d="M81.78 19.54h-8.89v-5.31H96.7v5.31h-8.9v26.53h-6"></path>
  <path class="text" fill="#000" fill-rule="nonzero" d="M102.19 41.77c2.415-.012 4.814-.383 7.12-1.1l.91 4.4c-2.745.99-5.642 1.49-8.56 1.48-7.31 0-9.85-3.39-9.85-9V31.4c0-4.92 2.2-9.08 9.66-9.08s9.13 4.35 9.13 9.37v5h-13v1.2c.05 2.78 1.05 3.88 4.59 3.88zM97.65 32h7.41v-1.18c0-2.2-.67-3.73-3.54-3.73s-3.87 1.53-3.87 3.73V32zm28.54-4.33c-2.148.97-4.217 2.102-6.19 3.39v15h-5.83V22.79h4.92l.38 2.58c1.897-1.284 3.955-2.313 6.12-3.06l.6 5.36zm14.24 0c-2.14.97-4.204 2.103-6.17 3.39v15h-5.83V22.79h4.92l.38 2.58c1.897-1.284 3.955-2.313 6.12-3.06l.58 5.36zm19.51 18.4h-4.78l-.43-1.58c-2.062 1.342-4.47 2.058-6.93 2.06-4.25 0-6.07-2.92-6.07-6.93 0-4.73 2.06-6.55 6.79-6.55h5.59v-2.44c0-2.58-.72-3.49-4.45-3.49-2.17.024-4.33.266-6.45.72l-.72-4.45c2.606-.72 5.296-1.09 8-1.1 7.31 0 9.47 2.58 9.47 8.41l-.02 15.35zm-5.83-8.8h-4.3c-1.91 0-2.44.53-2.44 2.29s.53 2.34 2.34 2.34c1.544-.024 3.058-.436 4.4-1.2v-3.43zm23.75-19.79c-1.1-.237-2.224-.364-3.35-.38-2.29 0-2.63 1-2.63 2.77v2.92h5.93l-.33 4.64h-5.59v18.64h-5.83V27.43h-3.73v-4.64h3.73v-3.25c0-4.83 2.25-7.22 7.41-7.22 1.69-.006 3.372.22 5 .67l-.61 4.49zm11.38 29.07c-8 0-10.13-4.4-10.13-9.18v-5.88c0-4.78 2.15-9.18 10.13-9.18s10.13 4.4 10.13 9.18v5.88c.01 4.78-2.15 9.18-10.13 9.18zm0-19.27c-3.11 0-4.3 1.39-4.3 4v6.26c0 2.63 1.2 4 4.3 4 3.1 0 4.3-1.39 4.3-4V31.3c0-2.63-1.19-4.02-4.3-4.02zm25.14.39c-2.14.97-4.204 2.103-6.17 3.39v15h-5.83V22.79h4.92l.38 2.58c1.897-1.284 3.954-2.313 6.12-3.06l.58 5.36zm16.02 18.4V29.82c0-1.24-.53-1.86-1.86-1.86-2.137.254-4.2.934-6.07 2v16.11h-5.83V22.79h4.45l.57 2c2.906-1.47 6.088-2.315 9.34-2.48 1.843-.174 3.6.82 4.4 2.49 2.91-1.49 6.104-2.34 9.37-2.49 3.87 0 5.26 2.72 5.26 6.88v16.88h-5.83V29.82c0-1.24-.53-1.86-1.86-1.86-2.14.236-4.208.917-6.07 2v16.11h-5.87z"></path>
  <path class="rect-dark" fill="#4040B2" d="M36.4 39.13l16.4-9.46V10.72L36.4 20.2"></path>
  <path class="rect-light" fill="#5C4EE5" d="M18.2 10.72l16.4 9.48v18.93l-16.4-9.47"></path>
  <path class="rect-light" fill="#5C4EE5" d="M0 19.09l16.4 9.47V9.62L0 .15m18.2 50.53l16.4 9.47V41.21l-16.4-9.47"></path>
</svg>

  </div>

  <ul class="nav sidebar-nav">
    <li><a href="/intro/index.html">Intro</a></li>
    <li><a href="/docs/index.html">Docs</a></li>
    <li><a href="/guides/index.html">Guides</a></li>
    <li><a href="/docs/extend/index.html">Extend</a></li>
    <li><a href="https://www.hashicorp.com/products/terraform/?utm_source=oss&utm_medium=header-nav&utm_campaign=terraform">Enterprise</a></li>
  </ul>

  <div class="divider"></div>

  <ul class="external nav sidebar-nav">
    <li>
      <a href="/downloads.html">
        <svg xmlns="http://www.w3.org/2000/svg" version="1.1" viewbox="0 0 28 28" enable-background="new 0 0 28 28" xmlns:xlink="http://www.w3.org/1999/xlink" xml:space="preserve">
  <path d="M28 0H0v28h28V0zM13.8 22.9L7 17.3l2-2.4 3.2 2.6V7h3.2v10.5l3.2-2.6 2 2.4L13.8 22.9z"></path>
</svg>
 Download
      </a>
    </li>
    <li>
      <a href="https://github.com/hashicorp/terraform">
        <svg xmlns="http://www.w3.org/2000/svg" version="1.1" viewbox="0 0 28 28" enable-background="new 0 0 28 28" xmlns:xlink="http://www.w3.org/1999/xlink" xml:space="preserve">
  <path d="M28 0H0v28h11.4c0 0 0-1.3 0-2.4C7.7 26.4 7 23.9 7 23.9 6.4 22.4 5.5 22 5.5 22c-1.2-0.8 0.1-0.8 0.1-0.8 1.3 0.1 2 1.4 2 1.4 1.2 2 3 1.4 3.8 1.1 0.1-0.8 0.5-1.4 0.9-1.8 -2.9-0.3-6-1.5-6-6.5 0-1.4 0.5-2.6 1.3-3.5C7.5 11.5 7 10.2 7.8 8.4c0 0 1.1-0.4 3.6 1.3 1-0.3 2.2-0.4 3.3-0.4 1.1 0 2.2 0.2 3.3 0.4 2.5-1.7 3.6-1.3 3.6-1.3 0.7 1.8 0.3 3.1 0.1 3.5 0.8 0.9 1.3 2.1 1.3 3.5 0 5-3.1 6.1-6 6.5 0.5 0.4 0.9 1.2 0.9 2.4 0 1.8 0 3.7 0 3.7H28V0z"></path>
</svg>
 GitHub
      </a>
    </li>
  </ul>
</aside>


    <div class="container">
  <div class="row">
    <div id="docs-sidebar" class="col-sm-4 col-md-3 col-xs-12 hidden-print" role="complementary">
          <ul class="nav docs-sidenav">
      <li>
        <a class="back" href="/docs/extend/index.html">Extending Terraform</a>
      </li>
      <hr/>
      <li class="active">
        <a class="back" href="/docs/extend/testing/index.html">Testing</a>
        <ul class="nav">

          <li class="active">
            <a href="/docs/extend/testing/acceptance-tests/index.html">Acceptance Tests</a>
              <ul class="nav">
                <li>
                  <a href="/docs/extend/testing/acceptance-tests/testcase.html">Test Cases</a>
                </li>
                <li class="active">
                  <a href="/docs/extend/testing/acceptance-tests/teststep.html">Test Steps</a>
                </li>
                <li>
                  <a href="/docs/extend/testing/acceptance-tests/sweepers.html">Sweepers</a>
                </li>
              </ul>
          </li>
          <li>
            <a href="/docs/extend/testing/unit-testing.html">Unit Testing</a>
          </li>
          <!--
          <li>
            <a href="/docs/extend/testing/testing-patterns.html">Resource Test Patterns</a>
          </li>
          -->
        </ul>
      </li>

      <hr>
      <li>
        <a class="back" href="/docs/internals/index.html">Terraform Internals</a>
      </li>
      <li>
        <a class="back" href="/guides/terraform-provider-development-program.html">Terraform Provider Development Program</a>
      </li>
    </ul>

    </div>

    <div id="inner" class="col-sm-8 col-md-9 col-xs-12" role="main">
      
  <h1 id="acceptance-tests-teststeps">
  <a name="acceptance-tests-teststeps" class="anchor" href="#acceptance-tests-teststeps">&raquo;</a>
  Acceptance Tests: TestSteps
</h1>
<p><code>TestStep</code>s represent the application of an actual Terraform configuration file
to a given state. Each step requires a configuration as input and provides
developers several means of validating the behavior of the specific resource
under test.</p>
<h2 id="test-modes">
  <a name="test-modes" class="anchor" href="#test-modes">&raquo;</a>
  Test Modes
</h2>
<p>Terraform’s test framework facilitates two distinct modes of acceptance tests,
<em>Lifecycle</em> and <em>Import</em>.</p>
<p><em>Lifecycle</em> mode is the most common mode, and is used for testing plugins by
providing one or more configuration files with the same logic as would be used
when running <code>terraform apply</code>.</p>
<p><em>Import</em> mode is used for testing resource functionality to import existing
infrastructure into a Terraform statefile, using the same logic as would be used
when running <code>terraform import</code>.</p>
<p>An acceptance test’s mode is implicitly determined by the fields provided in the
<code>TestStep</code> definition. The applicable fields are defined below in the [TestStep
Reference API][#teststep-reference-api].</p>
<h2 id="steps">
  <a name="steps" class="anchor" href="#steps">&raquo;</a>
  Steps
</h2>
<p><code>Steps</code> is slice property of
<a href="/docs/extend/testing/acceptance-tests/testcase.html">TestCase</a>, the object used
to construct acceptance tests. Each step represents a full <code>terraform apply</code> of
a given configuration language, followed by zero or more checks (defined later)
to verify the application. Each <code>Step</code> is applied in order, and require its own
configuration and optional check functions.</p>
<p>Below is a code example of a lifecycle test that provides two <code>TestStep</code> objects:</p>
<div class="highlight"><pre class="highlight go"><code><span class="k">package</span><span class="x"> </span><span class="n">example</span><span class="x">

</span><span class="c">// example.Widget represents a concrete Go type that represents an API resource</span><span class="x">
</span><span class="k">func</span><span class="x"> </span><span class="n">TestAccExampleWidget_basic</span><span class="p">(</span><span class="n">t</span><span class="x"> </span><span class="o">*</span><span class="n">testing</span><span class="o">.</span><span class="n">T</span><span class="p">)</span><span class="x"> </span><span class="p">{</span><span class="x">
    </span><span class="k">var</span><span class="x"> </span><span class="n">widgetBefore</span><span class="p">,</span><span class="x"> </span><span class="n">widgetAfter</span><span class="x"> </span><span class="n">example</span><span class="o">.</span><span class="n">Widget</span><span class="x">
    </span><span class="n">rName</span><span class="x"> </span><span class="o">:=</span><span class="x"> </span><span class="n">acctest</span><span class="o">.</span><span class="n">RandStringFromCharSet</span><span class="p">(</span><span class="m">10</span><span class="p">,</span><span class="x"> </span><span class="n">acctest</span><span class="o">.</span><span class="n">CharSetAlphaNum</span><span class="p">)</span><span class="x">

    </span><span class="n">resource</span><span class="o">.</span><span class="n">Test</span><span class="p">(</span><span class="n">t</span><span class="p">,</span><span class="x"> </span><span class="n">resource</span><span class="o">.</span><span class="n">TestCase</span><span class="p">{</span><span class="x">
        </span><span class="n">PreCheck</span><span class="o">:</span><span class="x">     </span><span class="k">func</span><span class="p">()</span><span class="x"> </span><span class="p">{</span><span class="x"> </span><span class="n">testAccPreCheck</span><span class="p">(</span><span class="n">t</span><span class="p">)</span><span class="x"> </span><span class="p">},</span><span class="x">
        </span><span class="n">Providers</span><span class="o">:</span><span class="x">    </span><span class="n">testAccProviders</span><span class="p">,</span><span class="x">
        </span><span class="n">CheckDestroy</span><span class="o">:</span><span class="x"> </span><span class="n">testAccCheckExampleResourceDestroy</span><span class="p">,</span><span class="x">
        </span><span class="n">Steps</span><span class="o">:</span><span class="x"> </span><span class="p">[]</span><span class="n">resource</span><span class="o">.</span><span class="n">TestStep</span><span class="p">{</span><span class="x">
            </span><span class="p">{</span><span class="x">
                </span><span class="n">Config</span><span class="o">:</span><span class="x"> </span><span class="n">testAccExampleResource</span><span class="p">(</span><span class="n">rName</span><span class="p">),</span><span class="x">
                </span><span class="n">Check</span><span class="o">:</span><span class="x"> </span><span class="n">resource</span><span class="o">.</span><span class="n">ComposeTestCheckFunc</span><span class="p">(</span><span class="x">
                    </span><span class="n">testAccCheckExampleResourceExists</span><span class="p">(</span><span class="s">"example_widget.foo"</span><span class="p">,</span><span class="x"> </span><span class="o">&amp;</span><span class="n">widgetBefore</span><span class="p">),</span><span class="x">
                </span><span class="p">),</span><span class="x">
            </span><span class="p">},</span><span class="x">
            </span><span class="p">{</span><span class="x">
                </span><span class="n">Config</span><span class="o">:</span><span class="x"> </span><span class="n">testAccExampleResource_removedPolicy</span><span class="p">(</span><span class="n">rName</span><span class="p">),</span><span class="x">
                </span><span class="n">Check</span><span class="o">:</span><span class="x"> </span><span class="n">resource</span><span class="o">.</span><span class="n">ComposeTestCheckFunc</span><span class="p">(</span><span class="x">
                    </span><span class="n">testAccCheckExampleResourceExists</span><span class="p">(</span><span class="s">"example_widget.foo"</span><span class="p">,</span><span class="x"> </span><span class="o">&amp;</span><span class="n">widgetAfter</span><span class="p">),</span><span class="x">
                </span><span class="p">),</span><span class="x">
            </span><span class="p">},</span><span class="x">
        </span><span class="p">},</span><span class="x">
    </span><span class="p">})</span><span class="x">
</span><span class="p">}</span><span class="x">
</span></code></pre></div><p>In the above example each <code>TestCase</code> invokes a function to retrieve it’s desired
configuration, based on a randomized name provided, however an in-line string or
constant string would work as well, so long as they contain valid Terraform
configuration for the plugin or resource under test. This pattern of first
applying and checking a basic configuration, followed by applying a modified
configuration with updated or additional checks is a common pattern used to test
update functionality.</p>
<h2 id="check-functions">
  <a name="check-functions" class="anchor" href="#check-functions">&raquo;</a>
  Check Functions
</h2>
<p>After the configuration for a <code>TestStep</code> is applied, Terraform’s testing
framework provides developers an opportunity to check the results by providing a
“Check” function. While possible to only supply a single function, it is
recommended you use multiple functions to validate specific information about
the results of the <code>terraform apply</code> ran in each <code>TestStep</code>. The <code>Check</code>
attribute is of <code>TestStep</code> is singular, so in order to include multiple checks
developers should use either <code>ComposeTestCheckFunc</code> or
<code>ComposeAggregateTestCheckFunc</code> (defined below) to group multiple check
functions, defined below:</p>
<h3 id="composetestcheckfunc">
  <a name="composetestcheckfunc" class="anchor" href="#composetestcheckfunc">&raquo;</a>
  ComposeTestCheckFunc
</h3>
<p>ComposeTestCheckFunc lets you compose multiple TestCheckFunc functions into a
single check. As a user testing their provider, this lets you decompose your
checks into smaller pieces more easily, with individual methods for checking
specific attributes. Each check is ran in the order provided, and on failure the
entire <code>TestCase</code> is stopped, and Terraform attempts to destroy any resources
created.</p>
<p>Example:</p>
<div class="highlight"><pre class="highlight go"><code><span class="n">Steps</span><span class="o">:</span><span class="x"> </span><span class="p">[]</span><span class="n">resource</span><span class="o">.</span><span class="n">TestStep</span><span class="p">{</span><span class="x">
  </span><span class="p">{</span><span class="x">
    </span><span class="n">Config</span><span class="o">:</span><span class="x"> </span><span class="n">testAccExampleResource</span><span class="p">(</span><span class="n">rName</span><span class="p">),</span><span class="x">
    </span><span class="n">Check</span><span class="o">:</span><span class="x"> </span><span class="n">resource</span><span class="o">.</span><span class="n">ComposeTestCheckFunc</span><span class="p">(</span><span class="x">
        </span><span class="c">// if testAccCheckExampleResourceExists fails to find the resource, </span><span class="x">
        </span><span class="c">// the parent TestStep and TestCase fail</span><span class="x">
      </span><span class="n">testAccCheckExampleResourceExists</span><span class="p">(</span><span class="s">"example_widget.foo"</span><span class="p">,</span><span class="x"> </span><span class="o">&amp;</span><span class="n">widgetBefore</span><span class="p">),</span><span class="x"> 
      </span><span class="n">resource</span><span class="o">.</span><span class="n">TestCheckResourceAttr</span><span class="p">(</span><span class="s">"example_widget.foo"</span><span class="p">,</span><span class="x"> </span><span class="s">"size"</span><span class="p">,</span><span class="x"> </span><span class="s">"expected size"</span><span class="p">),</span><span class="x">
    </span><span class="p">),</span><span class="x">
  </span><span class="p">},</span><span class="x">
</span><span class="p">},</span><span class="x">
</span></code></pre></div><h3 id="composeaggregatetestcheckfunc">
  <a name="composeaggregatetestcheckfunc" class="anchor" href="#composeaggregatetestcheckfunc">&raquo;</a>
  ComposeAggregateTestCheckFunc
</h3>
<p>ComposeAggregateTestCheckFunc lets you compose multiple TestCheckFunc functions
into a single check. It’s purpose and usage is identical to
ComposeTestCheckFunc, however each check is ran in order even if a previous
check failed, collecting the errors returned from any checks and returning a
single aggregate error. The entire <code>TestCase</code> is still stopped, and Terraform
attempts to destroy any resources created.</p>
<p>Example:</p>
<div class="highlight"><pre class="highlight plaintext"><code>Steps: []resource.TestStep{
  {
    Config: testAccExampleResource(rName),
    Check: resource.ComposeAggregateTestCheckFunc(
      testAccCheckExampleResourceExists("example_widget.foo", &amp;widgetBefore), // if testAccCheckExampleResourceExists fails to find the resource, the following TestCheckResourceAttr is still ran, with any errors aggregated
      resource.TestCheckResourceAttr("example_widget.foo", "active", "true"),
    ),
  },
},
</code></pre></div><h2 id="builtin-check-functions">
  <a name="builtin-check-functions" class="anchor" href="#builtin-check-functions">&raquo;</a>
  Builtin check functions
</h2>
<p>Terraform has several TestCheckFunc functions built in for developers to use for
common checks, such as verifying the status and value of a specific attribute in
the resulting state. Developers are encouraged to use as many as reasonable to
verify the behavior of the plugin/resource, and should combine them with the
above mentioned <code>ComposeTestCheckFunc</code> or <code>ComposeAggregateTestCheckFunc</code>
functions.</p>
<p>Most builtin functions accept <code>name</code>, <code>key</code>, and/or <code>value</code> fields, derived from
the typical Terraform configuration stanzas:</p>
<div class="highlight"><pre class="highlight hcl"><code><span class="n">resource</span> <span class="s2">"example_widget"</span> <span class="s2">"foo"</span> <span class="p">{</span>
  <span class="n">active</span> <span class="o">=</span> <span class="kp">true</span>
<span class="p">}</span>
</code></pre></div><p>Here the <code>name</code> represents the resource name in state (<code>example_widget.foo</code>),
the <code>key</code> represents the attribute to check (<code>active</code>), and <code>value</code> represents
the desired value to check against (<code>true</code>). Not all functions accept all three
inputs.</p>
<p>Below is a list of builtin check functions, with links to their corresponding
documentation on godoc.org:</p>

<ul>
<li><a href="https://godoc.org/github.com/hashicorp/terraform/helper/resource#TestCheckResourceAttrSet">TestCheckResourceAttrSet(name, key
string)</a><br/>
</li>
<li><a href="https://godoc.org/github.com/hashicorp/terraform/helper/resource#TestCheckModuleResourceAttrSet">TestCheckModuleResourceAttrSet(mp []string, name string, key
string)</a><br/>
</li>
<li><a href="https://godoc.org/github.com/hashicorp/terraform/helper/resource#TestCheckResourceAttr">TestCheckResourceAttr(name, key, value
string)</a><br/>
</li>
<li><a href="https://godoc.org/github.com/hashicorp/terraform/helper/resource#TestCheckModuleResourceAttr">TestCheckModuleResourceAttr(mp []string, name string, key string, value
string)</a>
</li>
<li><a href="https://godoc.org/github.com/hashicorp/terraform/helper/resource#TestCheckNoResourceAttr">TestCheckNoResourceAttr(name, key
string)</a><br/>
</li>
<li><a href="https://godoc.org/github.com/hashicorp/terraform/helper/resource#TestCheckModuleNoResourceAttr">TestCheckModuleNoResourceAttr(mp []string, name string, key
string)</a><br/>
</li>
<li><a href="https://godoc.org/github.com/hashicorp/terraform/helper/resource#TestCheckResourceAttrPtr">TestCheckResourceAttrPtr(name string, key string, value
*string)</a><br/>
</li>
<li><a href="https://godoc.org/github.com/hashicorp/terraform/helper/resource#TestCheckModuleResourceAttrPtr">TestCheckModuleResourceAttrPtr(mp []string, name string, key string, value
*string)</a><br/>
</li>
<li><a href="https://godoc.org/github.com/hashicorp/terraform/helper/resource#TestCheckResourceAttrPair">TestCheckResourceAttrPair(nameFirst, keyFirst, nameSecond, keySecond
string)</a><br/>
</li>
<li><a href="https://godoc.org/github.com/hashicorp/terraform/helper/resource#TestCheckModuleResourceAttrPair">TestCheckModuleResourceAttrPair(mpFirst []string, nameFirst string, keyFirst
string, mpSecond []string, nameSecond string, keySecond
string)</a><br/>
</li>
<li><a href="https://godoc.org/github.com/hashicorp/terraform/helper/resource#TestCheckOutput">TestCheckOutput(name, value
string)</a><br/>
</li>
</ul>
<h2 id="custom-check-functions">
  <a name="custom-check-functions" class="anchor" href="#custom-check-functions">&raquo;</a>
  Custom check functions
</h2>
<p>The <code>Check</code> field of <code>TestStep</code> accepts any function of type
<a href="https://godoc.org/github.com/hashicorp/terraform/helper/resource#TestCheckFunc">TestCheckFunc</a>.
Developers are free to write their own <code>check</code> functions to create customized
validation functions for their plugin. Any function that matches the
<code>TestCheckFunc</code> function signature of <code>func(*terraform.State) error</code> can be used
individually, or with other <code>TestCheckFunc</code> functions with one of the above
Aggregate functions.</p>
<p>It&#39;s common to write custom <code>TestCheckFunc</code> functions to validate resources were
created correctly by using SDKs directly to verify identity and properties of
resources. These functions can retrieve information by SDKs and provide the
results to other <code>TestCheckFunc</code> methods. The below example uses
<code>ComposeTestCheckFunc</code> to group a set of <code>TestCheckFunc</code> functions together. The
first function <code>testAccCheckExampleWidgetExists</code> uses the <code>Example</code> service SDK
directly, and queries it for the ID of the widget we have in state. Once found,
the result is stored into the <code>widget</code> struct declared at the begining of the
test function. The next check function <code>testAccCheckExampleWidgetAttributes</code>
recieves the updated <code>widget</code> and checks its attributes. The final check
<code>TestCheckResourceAttr</code> verifies that the same value is stored in state.</p>
<div class="highlight"><pre class="highlight go"><code><span class="k">func</span><span class="x"> </span><span class="n">TestAccExampleWidget_basic</span><span class="p">(</span><span class="n">t</span><span class="x"> </span><span class="o">*</span><span class="n">testing</span><span class="o">.</span><span class="n">T</span><span class="p">)</span><span class="x"> </span><span class="p">{</span><span class="x">
    </span><span class="k">var</span><span class="x"> </span><span class="n">widget</span><span class="x"> </span><span class="n">example</span><span class="o">.</span><span class="n">WidgetDescription</span><span class="x">

    </span><span class="n">resource</span><span class="o">.</span><span class="n">Test</span><span class="p">(</span><span class="n">t</span><span class="p">,</span><span class="x"> </span><span class="n">resource</span><span class="o">.</span><span class="n">TestCase</span><span class="p">{</span><span class="x">
        </span><span class="n">PreCheck</span><span class="o">:</span><span class="x">     </span><span class="k">func</span><span class="p">()</span><span class="x"> </span><span class="p">{</span><span class="x"> </span><span class="n">testAccPreCheck</span><span class="p">(</span><span class="n">t</span><span class="p">)</span><span class="x"> </span><span class="p">},</span><span class="x">
        </span><span class="n">Providers</span><span class="o">:</span><span class="x">    </span><span class="n">testAccProviders</span><span class="p">,</span><span class="x">
        </span><span class="n">CheckDestroy</span><span class="o">:</span><span class="x"> </span><span class="n">testAccCheckExampleWidgetDestroy</span><span class="p">,</span><span class="x">
        </span><span class="n">Steps</span><span class="o">:</span><span class="x"> </span><span class="p">[]</span><span class="n">resource</span><span class="o">.</span><span class="n">TestStep</span><span class="p">{</span><span class="x">
            </span><span class="p">{</span><span class="x">
                </span><span class="n">Config</span><span class="o">:</span><span class="x"> </span><span class="n">testAccExampleWidgetConfig</span><span class="p">,</span><span class="x">
                </span><span class="n">Check</span><span class="o">:</span><span class="x"> </span><span class="n">resource</span><span class="o">.</span><span class="n">ComposeTestCheckFunc</span><span class="p">(</span><span class="x">
                    </span><span class="n">testAccCheckExampleWidgetExists</span><span class="p">(</span><span class="s">"example_widget.bar"</span><span class="p">,</span><span class="x"> </span><span class="o">&amp;</span><span class="n">widget</span><span class="p">),</span><span class="x">
                    </span><span class="n">testAccCheckExampleWidgetAttributes</span><span class="p">(</span><span class="o">&amp;</span><span class="n">widget</span><span class="p">),</span><span class="x">
                    </span><span class="n">resource</span><span class="o">.</span><span class="n">TestCheckResourceAttr</span><span class="p">(</span><span class="s">"example_widget.bar"</span><span class="p">,</span><span class="x"> </span><span class="s">"active"</span><span class="p">,</span><span class="x"> </span><span class="s">"true"</span><span class="p">),</span><span class="x">
                </span><span class="p">),</span><span class="x">
            </span><span class="p">},</span><span class="x">
        </span><span class="p">},</span><span class="x">
    </span><span class="p">})</span><span class="x">
</span><span class="p">}</span><span class="x">

</span><span class="c">// testAccCheckExampleWidgetAttributes verifies attributes are set correctly by </span><span class="x">
</span><span class="c">// Terraform</span><span class="x">
</span><span class="k">func</span><span class="x"> </span><span class="n">testAccCheckExampleWidgetAttributes</span><span class="p">(</span><span class="n">widget</span><span class="x"> </span><span class="o">*</span><span class="n">example</span><span class="o">.</span><span class="n">WidgetDescription</span><span class="p">)</span><span class="x"> </span><span class="n">resource</span><span class="o">.</span><span class="n">TestCheckFunc</span><span class="x"> </span><span class="p">{</span><span class="x">
    </span><span class="k">return</span><span class="x"> </span><span class="k">func</span><span class="p">(</span><span class="n">s</span><span class="x"> </span><span class="o">*</span><span class="n">terraform</span><span class="o">.</span><span class="n">State</span><span class="p">)</span><span class="x"> </span><span class="kt">error</span><span class="x"> </span><span class="p">{</span><span class="x">
        </span><span class="k">if</span><span class="x"> </span><span class="o">*</span><span class="n">widget</span><span class="o">.</span><span class="n">active</span><span class="x"> </span><span class="o">!=</span><span class="x"> </span><span class="no">true</span><span class="x"> </span><span class="p">{</span><span class="x">
            </span><span class="k">return</span><span class="x"> </span><span class="n">fmt</span><span class="o">.</span><span class="n">Errorf</span><span class="p">(</span><span class="s">"widget is not active"</span><span class="p">)</span><span class="x">
        </span><span class="p">}</span><span class="x">

        </span><span class="k">return</span><span class="x"> </span><span class="no">nil</span><span class="x">
    </span><span class="p">}</span><span class="x">
</span><span class="p">}</span><span class="x">

</span><span class="c">// testAccCheckExampleWidgetExists uses the Example SDK directly to retrieve </span><span class="x">
</span><span class="c">// the Widget description, and stores it in the provided </span><span class="x">
</span><span class="c">// *example.WidgetDescription</span><span class="x">
</span><span class="k">func</span><span class="x"> </span><span class="n">testAccCheckExampleWidgetExists</span><span class="p">(</span><span class="n">resourceName</span><span class="x"> </span><span class="kt">string</span><span class="p">,</span><span class="x"> </span><span class="n">widget</span><span class="x"> </span><span class="o">*</span><span class="n">example</span><span class="o">.</span><span class="n">WidgetDescription</span><span class="p">)</span><span class="x"> </span><span class="n">resource</span><span class="o">.</span><span class="n">TestCheckFunc</span><span class="x"> </span><span class="p">{</span><span class="x">
    </span><span class="k">return</span><span class="x"> </span><span class="k">func</span><span class="p">(</span><span class="n">s</span><span class="x"> </span><span class="o">*</span><span class="n">terraform</span><span class="o">.</span><span class="n">State</span><span class="p">)</span><span class="x"> </span><span class="kt">error</span><span class="x"> </span><span class="p">{</span><span class="x">
        </span><span class="c">// retrieve the resource by name from state</span><span class="x">
        </span><span class="n">rs</span><span class="p">,</span><span class="x"> </span><span class="n">ok</span><span class="x"> </span><span class="o">:=</span><span class="x"> </span><span class="n">s</span><span class="o">.</span><span class="n">RootModule</span><span class="p">()</span><span class="o">.</span><span class="n">Resources</span><span class="p">[</span><span class="n">resourceName</span><span class="p">]</span><span class="x">
        </span><span class="k">if</span><span class="x"> </span><span class="o">!</span><span class="n">ok</span><span class="x"> </span><span class="p">{</span><span class="x">
            </span><span class="k">return</span><span class="x"> </span><span class="n">fmt</span><span class="o">.</span><span class="n">Errorf</span><span class="p">(</span><span class="s">"Not found: %s"</span><span class="p">,</span><span class="x"> </span><span class="n">resourceName</span><span class="p">)</span><span class="x">
        </span><span class="p">}</span><span class="x">

        </span><span class="k">if</span><span class="x"> </span><span class="n">rs</span><span class="o">.</span><span class="n">Primary</span><span class="o">.</span><span class="n">ID</span><span class="x"> </span><span class="o">==</span><span class="x"> </span><span class="s">""</span><span class="x"> </span><span class="p">{</span><span class="x">
            </span><span class="k">return</span><span class="x"> </span><span class="n">fmt</span><span class="o">.</span><span class="n">Errorf</span><span class="p">(</span><span class="s">"Widget ID is not set"</span><span class="p">)</span><span class="x">
        </span><span class="p">}</span><span class="x">

        </span><span class="c">// retrieve the client from the test provider</span><span class="x">
        </span><span class="n">client</span><span class="x"> </span><span class="o">:=</span><span class="x"> </span><span class="n">testAccProvider</span><span class="o">.</span><span class="n">Meta</span><span class="p">()</span><span class="o">.</span><span class="p">(</span><span class="o">*</span><span class="n">ExampleClient</span><span class="p">)</span><span class="x">

        </span><span class="n">response</span><span class="p">,</span><span class="x"> </span><span class="n">err</span><span class="x"> </span><span class="o">:=</span><span class="x"> </span><span class="n">client</span><span class="o">.</span><span class="n">DescribeWidgets</span><span class="p">(</span><span class="o">&amp;</span><span class="n">example</span><span class="o">.</span><span class="n">DescribeWidgetsInput</span><span class="p">{</span><span class="x">
            </span><span class="n">WidgetIDs</span><span class="o">:</span><span class="x"> </span><span class="p">[]</span><span class="kt">string</span><span class="p">{</span><span class="n">rs</span><span class="o">.</span><span class="n">Primary</span><span class="o">.</span><span class="n">ID</span><span class="p">},</span><span class="x">
        </span><span class="p">})</span><span class="x">

        </span><span class="k">if</span><span class="x"> </span><span class="n">err</span><span class="x"> </span><span class="o">!=</span><span class="x"> </span><span class="no">nil</span><span class="x"> </span><span class="p">{</span><span class="x">
            </span><span class="k">return</span><span class="x"> </span><span class="n">err</span><span class="x">
        </span><span class="p">}</span><span class="x">

        </span><span class="c">// we expect only a single widget by this ID. If we find zero, or many, </span><span class="x">
        </span><span class="c">// then we consider this an error</span><span class="x">
        </span><span class="k">if</span><span class="x"> </span><span class="nb">len</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">WidgetDescriptions</span><span class="p">)</span><span class="x"> </span><span class="o">!=</span><span class="x"> </span><span class="m">1</span><span class="x"> </span><span class="o">||</span><span class="x">
            </span><span class="o">*</span><span class="n">response</span><span class="o">.</span><span class="n">WidgetDescriptions</span><span class="p">[</span><span class="m">0</span><span class="p">]</span><span class="o">.</span><span class="n">WidgetID</span><span class="x"> </span><span class="o">!=</span><span class="x"> </span><span class="n">rs</span><span class="o">.</span><span class="n">Primary</span><span class="o">.</span><span class="n">ID</span><span class="x"> </span><span class="p">{</span><span class="x">
            </span><span class="k">return</span><span class="x"> </span><span class="n">fmt</span><span class="o">.</span><span class="n">Errorf</span><span class="p">(</span><span class="s">"Widget not found"</span><span class="p">)</span><span class="x">
        </span><span class="p">}</span><span class="x">

        </span><span class="c">// store the resulting widget in the *example.WidgetDescription pointer</span><span class="x">
        </span><span class="o">*</span><span class="n">widget</span><span class="x"> </span><span class="o">=</span><span class="x"> </span><span class="o">*</span><span class="n">response</span><span class="o">.</span><span class="n">WidgetDescriptions</span><span class="p">[</span><span class="m">0</span><span class="p">]</span><span class="x">
        </span><span class="k">return</span><span class="x"> </span><span class="no">nil</span><span class="x">
    </span><span class="p">}</span><span class="x">
</span><span class="p">}</span><span class="x">
</span></code></pre></div><h2 id="next-steps">
  <a name="next-steps" class="anchor" href="#next-steps">&raquo;</a>
  Next Steps
</h2>
<p>Acceptance Testing is an essential approach to validating the implementation of a Terraform Provider. Using actual APIs to provision resources for testing can leave behind real infrastructure that costs money between tests. The reasons for these leaks can vary, regardless Terraform provides a mechanism known as <a href="/docs/extend/testing/acceptance-tests/sweepers.html">Sweepers</a> to help keep the testing account clean.</p>


    </div>
  </div>
</div>


    <div id="footer" class="navigation hidden-print">
      <div class="container">
        <div class="row">
          <div class="col-xs-12">
            <ul class="footer-links nav navbar-nav">
              <li><a href="/intro/index.html">Intro</a></li>
              <li><a href="/docs/index.html">Docs</a></li>
              <li><a href="/docs/extend/index.html">Extend</a></li>
              <li><a href="https://www.hashicorp.com/privacy">Privacy</a></li>
              <li><a href="/security.html">Security</a></li>
              <li><a href="/assets/files/press-kit.zip">Press Kit</a></li>
            </ul>
            <ul class="footer-links nav navbar-nav navbar-right">
              <li><a href="https://github.com/hashicorp/terraform-website">Edit this page</a></li>
            </ul>
          </div>
        </div>
      </div>
    </div>

    <script type="application/ld+json">
      {
        "@context": "http://schema.org",
        "@type": "Product",
        "name": "Terraform",
        "alternateName": "Terraform by HashiCorp",
        "manufacturer": "HashiCorp",
        "url": "https://www.terraform.io",
        "logo": "https://ewilde.github.io/terraform-provider-openfaas/https://ewilde.github.io/terraform-provider-openfaas/assets/images/logo-hashicorp-3f10732f.svg",
        "sameAs": [
          "https://github.com/hashicorp/terraform"
        ]
      }
    </script>
  </body>
</html>
